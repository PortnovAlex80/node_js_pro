# Система управления складом (WMS) - серверная часть (backend NodeJS/TS)

## Оглавление

1. [Введение](#введение-в-проект)
2. [Бизнес требования](#бизнес-требования)
3. [Концепция системы](#концепция-системы-фрагмент-карточки-проекта)
4. [Пользовательские требования](#пользовательские-требования)
5. [Функциональные требования](#основные-функциональные-требования)
6. [Пользователи](#пользователи-системы)
7. [Роли пользователей](#пользователи-системы)
8. [Проектирование REST API](#проектирование-rest-api)
9. [Участники](#участники)
10. [HTTP ответы ресурса Пользователи](#http-ответы-ресурса-пользователи)
11. [HTTP ответы ресурса Продукты](#http-ответы-ресурса-продукты)
12. [Архитектура приложения](#архитектура-приложения)
13. [Проектирование модели предметной области](#проектирование-модели-предметной-области)
14. [ER diagram](#er-diagram-users-and-products)
15. [Физическая модель данных для ORM Prisma NodeJS](#физическая-модель-данных-для-orm-prisma-nodejs)
16. [Список литературы](#используемая-литература-в-ходе-подготовки-проекта)

------------
**⚠️ RUN**  
1 env config:

PORT=set the port as number  
SALT=set the salt as number  
SECRET='set the secret as string' 
SKIP = 0
TAKE = 20

2 npm ci && npm start 
3 e2e test: npm test:e2e

------------
## Техническое введение

⚠️ Это учебный проект курса https://www.udemy.com/course/nodejs-start/ (https://learn.purpleschool.ru/public/products) в рамках которого я выступаю в ролях:

- Junior Backend Developer for JS/NodeJS/TS (implementing backend)
- Middle System Analyst (describing business and system requirements)

В роли **Junior Backend Developer**:
- непосредственно сама реализация приложения;  
- проектирование слоеной архитектуры (middlewares, exceptions filters,  controller, error handler, services, repository, orm prisma);
- реализация CRUD операции с ресурсом (товары на складе);  
- реализация JWT авторизация с ролевой моделью;  
- реализация документации REST API (swagger);
- использование при разработке тестирования (unit, e2e);
- использование DI, логгирования ошибок, работа Git и тп.
- разработка Telegram-bot с использованием функционала слоя бизнес-логики (DI)
    
В роли **Middle System Analyst**:
- выделение видов требования;
- проектирование архитектуры приложения;
- разработка и описание бизнес-требований и их артифактов;
- разработка и описание пользовательских требований (Use cases, User stories, Job stories, User stories mapping ==доработать==);
- разработка и описание функциональных требований;
- проработка нефункциональных требований (==доработать==);
- проработка качества требований и критериев приемки(==доработать==);
- проработка Event storming(==доработать==)
- выделение агрегатов доменных областей и bounded contexts(==доработать==)
- проектирование Модели предметной области и баз данных;
- проектирование REST API;
- формулирование измеримых требований к качеству интерфейсов согласно подхода стандартов семейства HCI (Human-Computer Interaction)(==доработать==)
- базовые угрозы информационной безопасности(==доработать==)
- проверка требований на INCOSE Requirements Writing Guide(==доработать==)
  
&#128736;  Инструменты для редактирования README.md
- https://github.com/GnuriaN/format-README/blob/master/README.md
- https://structurizr.com/
- https://tableconvert.com/markdown-generator
- https://pandao.github.io/editor.md/en.html
- https://editor.swagger.io/
- https://emojio.ru/objects/d83ddee0-1f6e0-molot-i-gaechnyy-klyuch.html
- https://www.udemy.com/course/microservices-with-node-js-and-react/learn/lecture/19099026#overview пример проектирования метода by Stephen Grider
  
------------
## Введение в проект

В рамках проекта имитируется проект разработки WMS для интернет-магазина. Необходимо учитывать, что реальная система складского учета очень сложная, поэтому в проекте используется очень упрощенная модель, задача которой демонстрация навыков, перечисленных в  [Техническом введении](#техническое-введение). 

Задача раздела помочь команде разработки ознакомится с контекстом задачи. 

Наш интернет-магазин является активно развивающимся проектом, который занимается продажей товаров в онлайн-режиме.

Одной из важнейших доменных областей нашего интернет-магазина является Склад. Задача нашего проекта - обеспечить эффективное и надежное управление товарными запасами для поддержки онлайн-продаж, с минимальными операционными расходами на складские операции.

Текущая боль нашего проекта заключается в отсутствии системы управления складскими операциями (WMS). Для решения этой проблемы необходимо провести анализ требований к системе WMS и выбрать подходящую систему, которая удовлетворит наши потребности. Реализация данного проекта позволит нам повысить эффективность управления запасами товаров и улучшить обслуживание наших клиентов, что приведет к увеличению прибыли и укреплению нашей позиции на рынке электронной коммерции.

⚠️Примечание:
Количественные показатели целей бизнеса вида:
> Освоить Х% рынка за Y месяцев. Увеличить сектор рынка в стране X на Y%
> за Z месяцев. Достигнуть объема продаж X единиц или дохода, равного
> $Y, за Z месяцев.
>
не рассматриваются в рамках портфолио.
Артефакт анализа бизнес-требований Vision так же не рассматривается. 



## Бизнес требования

Бизнес - систематическая деятельность, направленная на получение прибыли.

**Для** :  
>  - определения смысла проекта и обоснования его необходимости;
>  - разработки основы контракта; 
>  - разработки критериев приемки проекта;
>  - определения рамок проекта; 
>  - критериев приоритезации задач в ходе  разработки; 
>  - для формирования Product owners backlog,

необходимо выделить **бизнес-требования** к проекту, так как задача информационной системы или программного обеспечения достижение целей бизнеса за счет автоматизации бизнес-процессов.

Основная потребность бизнеса в сфере электронной коммерции, связанная с продажей товаров, может быть сформулирована следующим образом:

> Обеспечение эффективного и надежного управления товарными запасами для
> поддержки онлайн-продаж

Чтобы ответить на вопрос “Зачем бизнесу нужен этот проект?” рассмотрим пример, на основе которого будет сформулирован ответ:

> В электронной коммерции необходимо удовлетворять потребности клиентов
> и удерживать их внимание. Для этого, с точки зрения WMS, важно знать
> актуальное количество товара в наличии на складе. В противном случае,
> существует вероятность, что клиент будет разочарован, так как он не
> получит товар, который заказывал, либо товар, который есть в наличии
> не будет выставлен в Каталоге интернет-магазина как доступный. В
> итоге, клиент может обратиться к конкурентам, где найдет необходимый
> товар, и наш интернет-магазин потеряет клиента. Поэтому знать точное
> количество товаров на складе важно для сохранения
> конкурентоспособности и удержания клиентов.

**Зачем** это нужно:
> Обеспечить конкурентоспособность интернет-магазина за счет:
>  - учета актуальных остатков товаров 
>  - минимизации времени выполнения всех складских операций, в частности сборки заказов 
>  - оптимизации использования полезной площади хранения склада 
>  - минимизации операционных издержек

Какие **проблемы** решает система:
> - неактуальные остатки
> - переполнение склада
> - недоиспользование площадей склада
> - неоптимальное расположение товара на складе, что приводит к повышенным затратам на поиск и перемещение товаров;
> - неоптимальное время сборки заказов из-за неоптимального расположения товаров на складе
> - ошибки в сборке заказа, которые приводят к затратам на возврат заказа или к репутационным рискам
> - трудоемкость и возможные ошибки при ручном планировании графика сборки заказов

Решение указанных проблем позволит не терять доход из-за оттока клиентов к конкурентами по причине отсутствия товара, а также позволит снизить и удерживать уровень операционных расходов в рамках запланированных бюджетов. Соответственно, потребность бизнеса заключается в решении указанных ранее проблем:

> Бизнесу в сфере электронной коммерции необходимо обеспечить постоянную
> доступность товаров для своих покупателей, а также оптимизировать
> процессы хранения, перемещения и контроля запасов.

Для достижения этой цели требуется разработка и внедрение системы управления складом (WMS), которая позволит более эффективно управлять товарными запасами, снижать издержки и улучшать обслуживание клиентов.

Выделим бизнес-потребности в таблицу.

### Бизнес-потребности

|                                      Какую проблему решаем                                     |                Потребность               |                                                                 Описание                                                                 |
|:----------------------------------------------------------------------------------------------:|:----------------------------------------:|:----------------------------------------------------------------------------------------------------------------------------------------:|
| Неактуальные остатки                                                                           | Управление инвентаризацией               | Точное отслеживание и управление уровнем запасов, местоположением и перемещением товаров на складе.                                      |
| Обработка и выполнение заказов                                                                 | Обработка и выполнение заказов           | Эффективная обработка входящих заказов, комплектация, упаковка и доставка, чтобы удовлетворить потребности клиентов.                     |
| Управление трудовыми ресурсами                                                                 | Управление трудовыми ресурсами           | Оптимизация распределения рабочей силы, отслеживание производительности и балансировка нагрузки для эффективной работы.                  |
| Интеграция и обмен данными                                                                     | Интеграция и обмен данными               | Бесшовное взаимодействие и обмен данными с другими корпоративными системами, такими как ERP, TMS и платформы электронной коммерции.      |
| Отчетность и аналитика                                                                         | Отчетность и аналитика                   | Получение оперативных данных и ключевых показателей эффективности (KPI) для принятия обоснованных решений и улучшения процессов.         |
| Переполнение,  недоиспользование площадей склада,  неоптимальное расположение товара на складе | Оптимизация и использование пространства | Максимизация складской емкости и эффективность размещения товаров для сокращения затрат и улучшения работы на складе.                    |
| Приемка и размещение товаров                                                                   | Приемка и размещение товаров             | Оптимизация процессов приемки, проверки и хранения входящих товаров для обеспечения точности и эффективности.                            |

### Реестр бизнес-требований

| Код требования | Описание требования |
| :--- | :--- |
| BREQ-01 WMS.УчетОстатков | Система WMS должна обеспечивать точный учет остатков товаров на складе согласно BRULE-01 |
| BREQ-02 WMS.УправлениеХранениемТовара| Система WMS должна обеспечивать хранение товара с оптимальным расположением на складе для минимизации времени поиска и перемещения товара к месту сборки согласно BRULE-02,|
| BREQ-03 WMS.ФормированиеГрафикаСборки| Система WMS должна обеспечивать автоматическое формирование графика сборки заказов|

### Реестр бизнес-правил
| Код BRULE | Описание BRULE | Код требования |
| :--- | :--- | :--- |
| BRULE-01 | Остатки товаров на складе должны обновляться автоматически после каждой операции приемки, отгрузки, перемещения или инвентаризации товаров | BREQ-01 WMS.УчетОстатков |
| BRULE-02 | Товары на складе должны располагаться в соответствии с их характеристиками и частотой обращения, чтобы максимально использовать полезную площадь склада и время поиска и перемещения товаров | BREQ-02 |
| BRULE-03 | График сборки заказов должен формироваться автоматически на основе текущей загруженности склада и времени, необходимого для выполнения операций | BREQ-03 |

### Стейкхолдеры

**Владельцы интернет-магазина:** Заинтересованы в оптимизации складских операций и снижении операционных издержек для повышения прибыльности бизнеса.
**Операционные менеджеры:** Заинтересованы в улучшении качества обслуживания клиентов и ускорении выполнения заказов.
**IT-специалисты:** Ответственны за поддержку и интеграцию WMS с другими системами компании.
**Поставщики товаров:** Заинтересованы в точном и своевременном контроле и учете поставляемых товаров на складе интернет-магазина.
**Клиенты интернет-магазина:** Заинтересованы в актуальности товарных предложений и быстром выполнении своих заказов.

### Концепция системы (Фрагмент Карточки проекта)

Карточка проекта используется для приведения достаточно сложных для реальной реализации бизнес-требований к CRUD операциям над сущностями, согласно практическим заданиям курса NodeJS (обеспечивается синхронизация выявления и документирования требований к программному обеспечению для WMS к практическим заданиям)

| Карточка проекта              |                                                                                                                                                                                                                                          |
|-------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Тема проекта | Управление товарными запасами и складскими операциями для интернет-магазина                                                                                                                                                                           |
| Категория системы                                                                                                                                                                           | Серверное приложение имеющее REST API для интеграции и Telegram-bot
 | Заказчик                                                                                                                                                                           | Департамент электронной коммерции Торгового дома "Итальянские Диваны"
 | **Настоящая ситуация**                                                                                                                                                                          
| Решаемые проблемы             | Снижение вероятности ошибок, вызванных человеческим фактором: ошибки при записи в журнал, расчет количества остатков и времени сборки заказов, снижение времени выполнения складских операций, оптимизация использования полезной площади хранения склада, минимизация операционных издержек |
 |   Заинтересованные стороны      | Пользователи услуг интернет-магазина, Владелец интернет-магазина, Работники склада, Поставщики товаров                                                                                                                                                                             |
| Текущее решение               | Учет и регистрация товаров на складе ведутся вручную с использованием бумажных журналов, дозаказ товаров со сниженным запасами производится не вовремя, инвентаризация происходит нерегулярно.                                                                                                                                                            |
| **Целевая ситуация**              |                                                                                                                                                                                                                                          |
| Цель для заказчика            | Увеличить эффективность и надежность управления товарными запасами для поддержки онлайн-продаж, сократить операционные издержки на 25% и сохранить конкурентоспособность интернет-магазина.                                                                                                                               |
| Назначение                    | **Для пользователей услуг интернет-магазина**: обеспечить наличие популярных товаров, снизить вероятность несоответствия товара заказу;                                                                                                      |
|                               | **Для работников склада**: упростить процессы приемки и выдачи товаров, инвентаризации склада, минимизировать время сборки заказов;                                                                                                                           |
|                               | **Для поставщиков товаров**: получить актуальную информацию о наличии товаров на складе.                                                                                                                            | 
|  **Концепция решения**  | 
|  Количество видов пользователей | 1 Складские работники |
|   | 2 Менеджеры склада |
|   | 3 Администраторы WMS |
|  Ключевые свойства и возможности (фичи) | |
| Для складских работников  | 1 Приемка товара на склад (Сущность - Products/**C**-R-U-D-L) |
|   | 2 Инвентаризация (Сущность - Products/C-**R-U-D-L**)|
|   |3 Сборка заказа (future release) |
|Для менеджера склада  | 1 Мониторинг запасов товаров (Сущность - Products/C-**R**-U-D-**L**) через REST API и Telegram-bot  | 
|   |2 Планирование графика сборки заказов (future release) |
|   |3 Работа с отчетами о работе склада(future release) |
| Для Администраторов склада  | |
|   |1 Управление доступом пользователей (Сущность - Users/**C-R-U-D-L**) |
|   |2 Настройка параметров системы WMS(future release)|
|   |3 Обновление и поддержка WMS(future release)|

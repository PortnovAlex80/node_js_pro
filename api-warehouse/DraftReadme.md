### Use case для первого релиза (MVP)
#### Use case UC-1.1 Создать приходную складской операции
 **Источник:** Business Use Case Управление складскими операциями 
**ID:** UC-1.1 
 **Название:** UC 1.1 Создать приходную складской операции  
 **Действующее лицо:** Работник склада 
 **Предусловие:** Пользователь авторизован в системе и имеет права на создание приходной складской операции
**Основной поток:** 
 1. **Пользователь** выбирает функцию Создание приходной складской операции
 2. **Система** выводит форму [Создание приходной складской операции] для ввода информации. В форме уже заполнены значения, недоступные для изменения:
-   Тип операции = Приход
-   Обоснование = Поставка
-   Дата = Текущая дата
-   Ответственный = Текущий авторизованный пользователь
3. **Пользователь** вносит данные о товаре, который он принимает, а именно считывает штрих код товара
4. **Система** ищет в справочнике товаров элемент по штрих-коду. Товар найден. **Система** добавляет товар в состав товаров и отображает на экране:
-   Наименование товара
-   Цену
5. **Пользователь** вводит количество товара.  
6. Повтор п. 3-5 для каждого товара из накладной
7. **Пользователь** выбирает функцию Сохранить данные
8. **Система** убеждается в полноте данных, введенных пользователем
9. **Система** сохраняет введенные пользователем данные и обновляет актуальные остатки.
10. **Система** сообщает о успешном завершении операции

**Расширение:**
**4a. Товар по штрих-коду не найден в системе**
* 4а1.Система предлагает ввести новый товар в систему. Ссылка на юскейс “Создание товара”
* 4а2 Переход на п. 5 основного сценария

**7a. Данные по количеству в накладной и фактическому количеству не совпадают**
* 7а1.Пользователь устанавливает флаг Есть расхождения = Истина
* 7а2.Переход на п.6 основного сценария

**9a. Данные не введены**
* 9а1 Система обнаруживает обязательные поля, в которые пользователь не ввел данные
* 9а2 Система оповещает пользователя об ошибке
* 9а3 Выполнение сценария возвращает в основной поток в п.5

**9б. Данные введены некорректно**
* 9б1 Система обнаруживает поля, в которые пользователь ввел * некорректные данные
* 9б2 Система оповещает пользователя об ошибке
* 9б3 Выполнение сценария возвращается в основной поток в п.5

**10а. Ошибка обращения в БД**
* 10а1 Система оповещает пользователя об ошибке при обращении к БД
* 10а2 Завершение выполнения сценария

#### Use case UC-1.2 Создать расходную складской операции
 **Источник:** Business Use Case Управление складскими операциями 
**ID:** UC-1.2 
 **Название:** UC 1.2 Создать расходную складской операции  
 **Действующее лицо:** Работник склада 
 **Предусловие:** Пользователь авторизован в системе и имеет права на создание расходную складской операции
**Основной поток:** 
 1. **Пользователь** выбирает функцию Создание расходную складской операции
 2. **Система** выводит форму [Создание расходную складской операции] для ввода информации. В форме уже заполнены значения, недоступные для изменения:
-   Тип операции = Приход
-   Обоснование = Сборка заказа
-   Дата = Текущая дата
-   Ответственный = Текущий авторизованный пользователь
3. **Пользователь** вносит данные о товаре, который он расходует, а именно считывает штрих код товара
4. **Система** ищет в справочнике товаров элемент по штрих-коду. Товар найден. **Система** добавляет товар в состав Заказа и отображает на экране:
- Наименование товара
- Цену
- Остаток
5. **Пользователь** вводит количество товара для расхода.
6. **Система** проверяет количество товара для расхода на остаток. Остатка достаточно для расхода.
7. Повтор п. 3-5 для каждого товара из накладной
8. **Пользователь** выбирает функцию Сохранить данные
9. **Система** убеждается в полноте данных, введенных пользователем
10. **Система** проверяет достаточность остатков товаров на складе.
11. **Система** сохраняет введенные пользователем данные и обновляет актуальные остатки.
12. **Система** сообщает о успешном завершении операции

**Расширение:**
**4a. Товар по штрих-коду не найден в системе**
* 4а1.Система на основе рекомендательного алгоритма [BRULE-17] предлагает заменить товар на другой. Ссылка на юскейс “Замена товара”
* 4а2 Переход на п. 5 основного сценария

**6a. Наличного остатка на складе недостаточно для расходной операции**
* 6а1.Система сообщает о недостатке товара и на основе рекомендательного алгоритма [BRULE-17] предлагает заменить товар на другой. Ссылка на юскейс “Замена товара”
* 6а2 Система передает Менеджеру склада отчет о недостатке товара в Информации об остатках.
* 6а3 Переход на п. 5 основного сценария

**9a. Данные не введены**
* 9а1 Система обнаруживает обязательные поля, в которые пользователь не ввел данные
* 9а2 Система оповещает пользователя об ошибке
* 9а3 Выполнение сценария возвращает в основной поток в п.5

**9б. Данные введены некорректно**
* 9б1 Система обнаруживает поля, в которые пользователь ввел некорректные данные
* 9б2 Система оповещает пользователя об ошибке
* 9б3 Выполнение сценария возвращается в основной поток в п.5

**10а. Остатков на складе недостаточно**
* 10а1 Система оповещает пользователя об ошибке
* 10а2 Выполнение сценария возвращается в основной поток в п.5

**11а. Ошибка обращения в БД**
* 10а1 Система оповещает пользователя об ошибке при обращении к БД
* 10а2 Завершение выполнения сценария

```mermaid
sequenceDiagram
participant R as Работник склада
participant S as Система
R ->> S: Выбрать функцию Создание приходной складской операции
S -->> R: Вывести форму [Создание приходной складской операции]
R ->> S: Сканировать штрих код товара
alt товар найден
    S -->> R: Отобразить информацию о товаре
    R ->> S: Ввести количество товара
    R ->> S: Выбрать функцию Сохранить данные
    alt данные введены некорректно
        S -->> R: Оповестить об ошибке
    else данные не введены
        S -->> R: Оповестить об ошибке
    else все данные введены корректно
        S -->> R: Сохранить данные
        S -->> R: Сообщить об успешном завершении операции
    end
else товар не найден
    S -->> R: Предложить ввести новый товар в систему
end
alt ошибка обращения в БД
    S -->> R: Оповестить об ошибке при обращении к БД
end
```

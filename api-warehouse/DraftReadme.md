### Use case для основного релиза MVP

Нужно по шагам расписать какой-то юскейс с альтернативами и исключениями, и по нему построить диаграмму последовательности. кейс Провести складскую операцию *приход или расход)

Управление складскими операциями.
UC-1.1 Провести складскую операцию

| Business Use Case Управление складскими операциями|  
|--|
| **Название:** UC 1.1 Провести складскую операцию  |
| **Актор** Работник склада  |
| **Предусловия** Работник склада получил задание из системы на проведение складской операции в телеграмм-боте. Работнику известен тип операции, код товара и необходимое количество товара для перемещения.   |
| **Триггер** Работник склада вызывает функцию  подтверждения начала складской операции (Работник склада приступил к выполнению задания на проведение складской операции) |
| **Постусловие** Складская операция проведена. Информация (тип операции, наименование, код, количество товара) о складской операции сохранена в системе. Информация об остатках обновлена и сгенерировано **событие** об изменении остатка товара  |
| **Основной поток** | 
| 1.Работник склада вызывает функцию регистрации складской операции в системе  |
| 2.Система предоставляет Работнику склада информацию о месте хранения товара(при расходе товара) или номер ворот склада (при приемке товара) |
| 3.Работник склада находит товар и проверяет количество товара. Далее Работник склада передает в систему информацию о количестве товара  |
| 4.Система проверяет введенную информацию и сохраняет складскую операцию в БД  |
| 5.Система сообщает об успешном завершении складской операции |
| **Альтернативные потоки** | 
| 1а. Если Работник склада не отвечает или не выполняет задание в течение определенного периода времени, система может отправить уведомление или эскалировать ситуацию на следующий уровень управления. |
| 3а. Если Работник склада обнаруживает, что при операции "расход" товара не достаточно на складе, он уведомляет систему о недостатке товара на складе. Система завершает сценарий с генерацией события о недостаточности товара на складе |
| 3б. Если Работник склада не может найти товар на складе (например, из-за неверного расположения), Работник склада сообщает систему, которая сгенерирует событие об отсутствии товара на указанном месте.  Завершение сценария.| 
| 3в. Если товар поврежден или непригоден для использования, Работник склада сообщает системе о состоянии товара. Система генерирует событие о повреждении товара. Завершение сценария. |
| 3г.  Если при выполнении операции "приход" Работник склада обнаруживает, что товары не соответствуют тем, которые указаны в задании (например, неверный товар или неверное количество), он сообщает об этом систему. Система генерирует событие о несоответствии товара прихода указанным в задании. Завершение сценария.|
|4а. Если система не может обработать складскую операцию из-за технической проблемы, она уведомляет Работника склада об ошибке. Завершение сценария.|

```mermaid
sequenceDiagram
participant RS as Работник склада
participant S as Система
participant B as EventBroker
RS ->> S: Вызывать функцию регистрации складской операции
S -->> RS: Предоставить информацию о месте хранения товара/номере ворот
RS ->> S: Найти товар и передать информацию о количестве товара
alt товар не найден или поврежден
    RS ->> S: Сообщить о проблеме с товаром
    S -->> B: Сгенерировать событие о проблеме с товаром
else товар не соответствует заданию
    RS ->> S: Сообщить о несоответствии товара
    S -->> B: Сгенерировать событие о несоответствии товара
else товара недостаточно на складе
    RS ->> S: Уведомить о недостатке товара
    S -->> B: Сгенерировать событие о недостаточности товара
else все нормально
    S ->> S: Проверить информацию и сохранить операцию в БД
    S -->> RS: Сообщить об успешном завершении операции
    S -->> B: Сгенерировать событие об успешном завершении операции
end
alt система не может обработать операцию
    S -->> RS: Уведомить об ошибке
        S -->> B: Сгенерировать событие об ошибке обработки операции
end
```
